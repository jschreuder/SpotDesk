<md-card id="{{ ctrl.user.ticket_id }}">
    <md-card-title>
        <md-card-title-media>
            <div class="md-media-sm card-media" layout>
                <i class="fa fa-user" aria-hidden="true"></i>
            </div>
        </md-card-title-media>
        <md-card-title-text>
            <span class="md-headline">{{ ctrl.user.display_name }}</span>
            <span class="md-subhead description">
                E-mail: {{ ctrl.user.email }}
            </span>
        </md-card-title-text>
    </md-card-title>
</md-card>

<md-card>
    <md-card-header>
        <md-card-header-text>
            <span class="md-headline">
                <i class="fa fa-building" aria-hidden="true"></i>
                Departments
            </span>
        </md-card-header-text>
    </md-card-header>
    <md-card-content>
        <div layout="row">
            <div flex-xs flex="50" ng-repeat="d in ctrl.departments">
                <md-checkbox ng-checked="ctrl.hasDepartment(d)"
                             ng-click="ctrl.toggleDepartment(d)">
                    <strong>{{ d.name }}</strong> <span ng-if="d.parent_name">({{ d.parent_name }})</span>
                </md-checkbox>
            </div>
        </div>
        <div layout="row">
            <div layout="column" class="user-department-select-all">
                <div flex-xs flex="100">
                    <md-checkbox aria-label="Select All"
                                 ng-checked="ctrl.allDepartmentsChecked()"
                                 md-indeterminate="ctrl.departmentsAreIndeterminate()"
                                 ng-click="ctrl.toggleAllDepartments()">
                        <span ng-if="ctrl.allDepartmentsChecked()">Un-</span>Select All
                    </md-checkbox>
                </div>
            </div>
            <span flex></span>
            <div layout="column">
                <md-button class="md-raised md-primary" ng-click="ctrl.saveDepartments()">
                    Save
                </md-button>
            </div>
        </div>
    </md-card-content>
</md-card>

<md-card>
    <md-card-header>
        <md-card-header-text>
            <span class="md-title">
                <i class="fa fa-warning" aria-hidden="true"></i>
                Danger zone
            </span>
        </md-card-header-text>
    </md-card-header>
    <md-card-content>
        <md-button class="md-raised md-warn" ng-click="ctrl.deleteUser()">Delete user</md-button>
    </md-card-content>
</md-card>
